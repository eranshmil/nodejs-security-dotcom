---
import { buildBookPricing, STORE, SITE } from '~/config.mjs';

import { getCanonical, getHomePermalink } from '~/utils/permalinks';
import Layout from '~/layouts/BooksLayout.astro';


import BookAuthor from '~/components/widgets/CommandInjection/BookAuthor.astro';
import ScaleUpSecurity from '~/components/widgets/CommandInjection/ScaleUpSecurity.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import TestimonialHeroBlock from '~/components/widgets/CommandInjection/TestimonialHeroBlock.astro';
import TestimonialCollection from '~/components/widgets/CommandInjection/TestimonialCollection.astro';
import DeveloperCompanies from '~/components/widgets/DeveloperCompanies.astro';
import HeroBookBundle from '~/components/widgets/HeroBookBundle.astro';
import BookModulesCommandInjectionHighLevel from '~/components/widgets/BookModulesCommandInjectionHighLevel.astro';
import BookModulesPathTraversalHighLevel from '~/components/widgets/BookModulesPathTraversalHighLevel.astro';
import BookCoverHeroCommandInjection from '~/components/widgets/CommandInjection/BookCoverHeroCommandInjection.astro';
import BookCoverHeroPathTraversal from '~/components/widgets/PathTraversal/BookCoverHeroPathTraversal.astro';

const meta = {
	title: SITE.title,
	description: SITE.description,
	canonical: getCanonical(getHomePermalink()),
};

const discountCode = 'default';
const bundlePricing = buildBookPricing({discountCode: '', bookId: 'bundle'});
const CommandInjectionPricing = buildBookPricing({discountCode, bookId: 'CommandInjection'});
const PathTraversalPricing = buildBookPricing({discountCode, bookId: 'PathTraversal'});
---

<Layout {meta}>

	<HeroBookBundle
		discountPercentage={bundlePricing.discountPercentage}
		linkBuy={bundlePricing.linkBuy}
		priceBeforeDiscount={bundlePricing.priceBeforeDiscount}
		priceAfterDiscount={bundlePricing.priceAfterDiscount}
	/>

	<!-- <Hero
		_pretitle="Skill up on"
		title="Node.js Secure Coding"
		subtitle=""
		CTA2={{
			// text: 'Get the book, start coding securely',
			text: 'Buy the book',
			// text: 'Get started',
			href: STORE.bookBuyLink,
			hrefDarkMode: STORE.bookBuyLinkDarkMode,
			priceOld: '$57.60',
			priceNew: '$40.32',
			// priceNew: '$28.80',
		}}
		BOOK_COMMAND_INJECTION={{
			href: STORE.CommandInjection.bookBuyLinkDarkMode,
			priceOld: '$57.60',
			priceNew: '$40.32',
			// priceNew: '$28.80',
		}}
		BOOK_PATH_TRAVERSAL={{
			href: STORE.PathTraversal.buyBookLink,
			priceOld: '$57.60',
			priceNew: '$40.32',
			// priceNew: '$28.80',
		}}
	/> -->

	<BookAuthor />

	<BookCoverHeroCommandInjection
		linkLearnMore={"/book/command-injection"}
		discountPercentage={CommandInjectionPricing.discountPercentage}
		linkBuy={CommandInjectionPricing.linkBuy}
		priceBeforeDiscount={CommandInjectionPricing.priceBeforeDiscount}
		priceAfterDiscount={CommandInjectionPricing.priceAfterDiscount}
	/>

	<DeveloperCompanies />

	<BookCoverHeroPathTraversal
		linkLearnMore={"/book/path-traversal"}
		discountPercentage={PathTraversalPricing.discountPercentage}
		linkBuy={PathTraversalPricing.linkBuy}
		priceBeforeDiscount={PathTraversalPricing.priceBeforeDiscount}
		priceAfterDiscount={PathTraversalPricing.priceAfterDiscount}
	/>
	
	<TestimonialCollection />



	<BookModulesCommandInjectionHighLevel />



	<BookModulesPathTraversalHighLevel />



	<ScaleUpSecurity />

	<TestimonialHeroBlock />

	<CallToAction />
</Layout>
